{"version":3,"sources":["webpack:///webpack/bootstrap 8c9072d95dfa93dbcece","webpack:///./cepJs/autoCut.js","webpack:///./cepJs/main.js","webpack:///./cepJs/lib/layerInfoToCSSText.js"],"names":["AutoCut","init","window","localStorage","debug","addConsoleSupport","load","addClickMethods","bindEvent","loadList","forEach","file","loadJsx","bindLayerSelectEvent","cs","csInterface","start","evalScript","result","test","tryMethod","didSetupHandlers","addEventListener","e","console","log","apply","data","warn","error","event","CSEvent","extensionId","getExtensionID","dispatchEvent","layerSelectHandler","bind","JSON","parse","cssDom","innerHTML","layerInfoToCSSText","fileName","extensionRoot","getSystemPath","SystemPath","EXTENSION","CSInterface","document","getElementById","rgbToHex","r","g","b","toString","slice","colorObjToRgb","obj","opacity","undefined","red","green","blue","Math","round","suffix","info","cssInfo","width","borderWidth","height","borderColor","border","fontSize","fontWeight","color","borderRadius","br","topLeft","topRight","bottomLeft","bottomRight","backgroundColor","Object","keys","reduce","text","key"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8c9072d95dfa93dbcece","import layerInfoToCSSText from './lib/layerInfoToCSSText'\n\nexport default class AutoCut {\n    static csInterface = new CSInterface();\n\n    static loadList = [\n        'lib/es5-shim.jsx',\n        'lib/json2.jsx',\n        'lib/util.jsx',\n        'lib/console.jsx',\n        'lib/class.jsx',\n        'setting.jsx',\n        'css/const.jsx',\n        'css/ActionDescriptor.jsx',\n        'processWindow.jsx',\n        'css.jsx',\n        'layer.jsx',\n        'controller.jsx',\n        'main.jsx',\n    ];\n    static cssDom = document.getElementById('css');\n\n    static init() {\n        window.localStorage.debug = '*';\n        this.addConsoleSupport();\n        this.load();\n        this.addClickMethods();\n        this.bindEvent();\n    }\n\n    static load() {\n        this.loadList.forEach(file => this.loadJsx(file));\n    }\n\n    static bindEvent() {\n        this.bindLayerSelectEvent();\n    }\n\n    static addClickMethods() {\n        const cs = this.csInterface;\n        window.start = () => cs.evalScript('start()', (result) => {\n        });\n        window.test = () => cs.evalScript('test()', (result) => {\n        });\n        window.tryMethod = () => cs.evalScript('tryBtnHandler()', (result) => {\n        });\n    }\n\n    static addConsoleSupport() {\n        const cs = this.csInterface;\n        if (!window.didSetupHandlers) {\n            cs.addEventListener('CONSOLE_LOG', (e) => {\n                console.log.apply(console, e.data);\n            });\n            cs.addEventListener('CONSOLE_WARN', (e) => {\n                console.warn.apply(console, e.data);\n            });\n            cs.addEventListener('CONSOLE_ERROR', (e) => {\n                console.error.apply(console, e.data);\n            });\n        }\n        window.didSetupHandlers = true;\n    }\n\n    static bindLayerSelectEvent() {\n        try {\n            const cs = this.csInterface;\n            const event = new CSEvent('com.adobe.PhotoshopRegisterEvent', 'APPLICATION');  //创建一个“注册事件”\n            event.extensionId = cs.getExtensionID(); //设置“注册事件” extensionId 为你扩展的扩展ID\n            event.data = '1936483188'; // 想要监听的 ExtendScript 事件 eventID , 这里是创建图层对象事件: \"Mk  \"=1298866208\n            cs.dispatchEvent(event); //发送“注册事件”，完成注册\n\n            cs.addEventListener('com.adobe.PhotoshopJSONCallback' + cs.getExtensionID(), this.layerSelectHandler.bind(this))\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    static layerSelectHandler() {\n        this.csInterface.evalScript('selectLayerHandler()', (result) => {\n            console.log(JSON.parse(result));\n            this.cssDom.innerHTML = layerInfoToCSSText(JSON.parse(result));\n        });\n    }\n\n    static loadJsx(fileName) {\n        const extensionRoot = this.csInterface.getSystemPath(SystemPath.EXTENSION) + '/jsx/';\n        this.csInterface.evalScript('$.evalFile(\"' + extensionRoot + fileName + '\")');\n        console.log(`${fileName} run`);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./cepJs/autoCut.js","import AutoCut from './autoCut'\n\nAutoCut.init()\n\n\n// WEBPACK FOOTER //\n// ./cepJs/main.js","function rgbToHex(r, g, b) {\n    return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n}\n\nfunction colorObjToRgb(obj, opacity) {\n    if (opacity === 100 || opacity === undefined) {\n        return rgbToHex(obj.red, obj.green, obj.blue)\n    }\n    return `rgba(${obj.red}, ${obj.green}, ${obj.blue}, ${Math.round(opacity) / 100})`\n}\n\nfunction suffix() {\n    return ';<br>'\n}\n\nexport default function layerInfoToCSSText(info) {\n    let cssInfo = {}\n\n    if (info.width) {\n        const width = info.borderWidth ? info.width - info.borderWidth * 2 : info.width\n        cssInfo.width = `${width}px`\n    }\n    if (info.height) {\n        const height = info.borderWidth ? info.height - info.borderWidth * 2 : info.height\n        cssInfo.height = `${height}px`\n    }\n    if (info.borderColor) {\n        cssInfo.border = `${info.borderWidth}px solid ${colorObjToRgb(info.borderColor, info.opacity)}`\n    }\n    if (info.fontSize) {\n        cssInfo['font-size'] = `${info.fontSize}px`\n    }\n\n    const fontWeight = info.fontWeight\n    if (fontWeight && fontWeight === 'Bold') {\n        cssInfo['font-weight'] = `bold`\n    }\n    if (info.color) {\n        cssInfo.color = `${colorObjToRgb(info.color, info.opacity)}`\n    }\n    if (info.borderRadius) {\n        const borderRadius = info.borderRadius\n        const br = borderRadius.topLeft\n        if (br === borderRadius.topRight && br === borderRadius.bottomLeft && br === borderRadius.bottomRight) {\n            cssInfo['border-radius'] = `${borderRadius.topLeft}`\n        } else {\n            cssInfo['border-radius'] = `${borderRadius.topLeft} ${borderRadius.topRight} ${borderRadius.bottomRight} ${borderRadius.bottomLeft}`\n        }\n    }\n    if (info.backgroundColor) {\n        cssInfo['background-color'] = `${colorObjToRgb(info.backgroundColor, info.opacity)}`\n    }\n\n    return Object.keys(cssInfo).reduce((text, key) => {\n        return text + `${key}: ${cssInfo[key]}` + suffix()\n    }, '')\n}\n\n\n// WEBPACK FOOTER //\n// ./cepJs/lib/layerInfoToCSSText.js"],"sourceRoot":""}